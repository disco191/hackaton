<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ruals ‚Äî Simulaci√≥n Anti-Phishing</title>
  <meta name="description" content="Simulaci√≥n formativa anti-phishing. Proyecto Ruals.">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <main class="wrap">
    <section class="panel">
      <header class="panel-header">
        <div class="logo">Ruals</div>
        <div class="tag">SIMULACI√ìN EDUCATIVA</div>
      </header>

      <h1 class="headline">Si esto fuera phishing... <span class="red">habr√≠as picado</span></h1>

      <div class="visual-row">
        <img src="https://i.imgur.com/2Tt3LqV.png" alt="Pescador phishing" class="visual-img">
        <div class="counter-box" aria-live="polite">
          <div class="counter-title">Personas que han picado</div>
          <p>üëÄ <strong id="counter">0</strong> personas ya habr√≠an ca√≠do</p>
          <div class="counter-sub">m√©trica agregada ¬∑ sin datos personales</div>
        </div>
      </div>

      <p class="lead">
        Tranquilo ‚Äî con <strong>Ruals</strong> aprender√°s a detectar correos falsos. Si has llegado aqu√≠ desde el correo,
        pulsa el bot√≥n de feedback y ver√°s consejos inmediatos.
      </p>

      <div class="actions">
        <a class="btn primary" href="https://forms.gle/TU_GOOGLE_FORM_PREFILLED" target="_blank" rel="noopener">He clicado ‚Äî Ver feedback</a>
        <a class="btn ghost" href="#tips" onclick="document.getElementById('tips').scrollIntoView({behavior:'smooth'});return false;">Ver 3 consejos</a>
      </div>

      <section id="tips" class="tips">
        <h3>3 se√±ales r√°pidas</h3>
        <ul>
          <li>Remitente gen√©rico (no aparece tu nombre)</li>
          <li>Enlace extra√±o (pasa el rat√≥n para comprobar)</li>
          <li>Petici√≥n de informaci√≥n urgente o confidencial</li>
        </ul>
      </section>

      <footer class="foot">Proyecto Ruals ‚Äî Hackathon Sabadell ‚Äî Simulaci√≥n educativa</footer>
    </section>
  </main>

  <!-- Firebase + contador global -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
    import { getDatabase, ref, runTransaction } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-database.js";

    const COUNTER_EL = document.getElementById('counter');

    // Configuraci√≥n Firebase (usa la tuya)
    const firebaseConfig = {
      apiKey: "AIzaSyBB_FX-AlAlpMVZeBufOiczQt6msxCdK7g",
      authDomain: "rualshackathon.firebaseapp.com",
      databaseURL: "https://rualshackathon-default-rtdb.firebaseio.com",
      projectId: "rualshackathon",
      storageBucket: "rualshackathon.firebasestorage.app",
      messagingSenderId: "121871943295",
      appId: "1:121871943295:web:75a8d37a0c39a39fe1a14a",
      measurementId: "G-1FSZ6Q58ZQ"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const counterRef = ref(db, 'counter');

    // Incrementar y mostrar contador global
    runTransaction(counterRef, current => (current || 0) + 1)
      .then(snapshot => {
        COUNTER_EL.textContent = snapshot.snapshot.val().toLocaleString();
      })
      .catch(err => {
        console.warn('No se pudo actualizar contador:', err);
        COUNTER_EL.textContent = '‚Äî';
      });
  </script>
</body>
</html>
