<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ruals — Simulación Anti-Phishing (Cargando)</title>
  <meta name="description" content="Simulación formativa anti-phishing. Proyecto Ruals.">
  <link rel="stylesheet" href="styles.css">
  <style>
    /* Overlay de carga (añade esto en caso de que quieras que sea independiente) */
    .loader-overlay{
      position:fixed;inset:0;display:flex;align-items:center;justify-content:center;
      background:linear-gradient(180deg, rgba(2,6,23,0.85), rgba(2,6,23,0.93));
      z-index:9999;color:#e6f3ff;flex-direction:column;
    }
    .spinner{
      width:80px;height:80px;border-radius:50%;border:8px solid rgba(255,255,255,0.08);
      border-top-color:#00d1ff;animation:spin 1s linear infinite;margin-bottom:18px;
    }
    @keyframes spin{to{transform:rotate(360deg)}}
    .loader-text{font-family:Inter,Arial;opacity:.95}
    .small-note{font-size:13px;color:#9fb0c8;margin-top:12px}
  </style>
</head>
<body>
  <!-- UI principal (oculta, la simulación es pantalla de carga) -->
  <main class="wrap" aria-hidden="true" style="visibility:hidden;pointer-events:none;">
    <!-- (Tu contenido principal si algún día quieres mostrarlo) -->
  </main>

  <!-- Overlay de "cargando" visible permanentemente -->
  <div class="loader-overlay" role="status" aria-live="polite">
    <div class="spinner" aria-hidden="true"></div>
  </div>

  <!-- Firebase + lógica de conteo 1 vez por navegador -->
  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
  import { getDatabase, ref, runTransaction, onValue } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-database.js";

  // Elemento donde se mostrará el contador
  const COUNTER_EL = document.getElementById('counter'); // cambiar si es otra página

  const firebaseConfig = {
    apiKey: "AIzaSyBB_FX-AlAlpMVZeBufOiczQt6msxCdK7g",
    authDomain: "rualshackathon.firebaseapp.com",
    databaseURL: "https://rualshackathon-default-rtdb.firebaseio.com",
    projectId: "rualshackathon",
    storageBucket: "rualshackathon.firebasestorage.app",
    messagingSenderId: "121871943295",
    appId: "1:121871943295:web:75a8d37a0c39a39fe1a14a",
    measurementId: "G-1FSZ6Q58ZQ"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const counterRef = ref(db, 'counter');

  // Incrementar contador (suma 1 aunque recargues)
  runTransaction(counterRef, current => (current || 0) + 1)
    .catch(err => console.warn('No se pudo actualizar contador:', err));

  // Mostrar el contador en tiempo real
  onValue(counterRef, snapshot => {
    COUNTER_EL.textContent = snapshot.val()?.toLocaleString() || '0';
    COUNTER_EL.classList.add('counter-updated');
    setTimeout(() => COUNTER_EL.classList.remove('counter-updated'), 700);
  });
</script>

</body>
</html>
